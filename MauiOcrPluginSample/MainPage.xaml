<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Shell.NavBarIsVisible="False"
             x:Class="MauiOcrPluginSample.MainPage">

    <Grid RowDefinitions="*,Auto"
          RowSpacing="0"
          BackgroundColor="Black">

        <!--Cámara del tooltik-->
        <toolkit:CameraView x:Name="MyCamera"
                           HorizontalOptions="Fill"
                           VerticalOptions="Fill"
                           SizeChanged="OnCameraContentSizeChanged">
        </toolkit:CameraView>

        <AbsoluteLayout x:Name="OverlayLayout"
                       HorizontalOptions="Fill"
                       VerticalOptions="Fill">

            <!-- Recuadro de captura rojo -->
            <Border x:Name="CaptureBorder"
                   AbsoluteLayout.LayoutBounds="0.5,0.5,0.8,0.4"
                   AbsoluteLayout.LayoutFlags="PositionProportional,WidthProportional,HeightProportional"
                   BackgroundColor="Transparent"
                   Stroke="Red"
                   StrokeThickness="3"
                   StrokeShape="RoundRectangle 10"/>
        </AbsoluteLayout>


        <!--Contenedor para botones-->
        <VerticalStackLayout Grid.Row="1"
                             BackgroundColor="#1A1A1A"
                             Padding="5,10">

            <!--Fila de botones-->
            <HorizontalStackLayout Spacing="15"
                                  HorizontalOptions="Center">
                <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto">
                    <Label Text="🔍" 
           VerticalOptions="Center"
           FontSize="16"/>

                    <!--Maneja el zoom con un slider-->
                    <Slider x:Name="zoomSlider"
            Grid.Column="1"
            MinimumTrackColor="LightGray"
            MaximumTrackColor="DarkGray"
            ThumbColor="White"
                            WidthRequest="200"
            ValueChanged="OnZoomSliderChanged"/>

                    <!--Botones-->
                </Grid>
                <!--Activar/Desactivar el flash-->
                <Button x:Name="flashButton"
                        Clicked="OnFlashButtonClicked"
                        Text="⚡"
                        WidthRequest="60"
                        HeightRequest="50"/>

                <Button x:Name="preProcessButton"
                    Clicked="OnPreProcessButtonClicked"
                        Text="B/N"
                    WidthRequest="60"
                    HeightRequest="50"/>

                <!--Tomar foto-->
                <Button Text="📸 Foto" 
                        Clicked="OnCapturePhotoClicked"
                        WidthRequest="120"
                        BackgroundColor="#2F75B5"
                        HeightRequest="50"/>

                <!--Seleccioanr de galeria-->
                <Button Text="🖼️" 
                        Clicked="OnSelectFromGalleryClicked"
                        WidthRequest="60"
                        BackgroundColor="#2F75B5"
                        HeightRequest="50"/>

                <!--Reiniciar la cámara-->
                <Button Text="🔄" 
                         Clicked="OnResetCamera"
                         WidthRequest="60"
                        BackgroundColor="#2F75B5"
                         HeightRequest="50"/>

            </HorizontalStackLayout>
        </VerticalStackLayout>

        <ActivityIndicator x:Name="loadingIndicator"
                       Grid.RowSpan="2"
                       IsVisible="False"
                       IsRunning="True"
                       Color="White"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
    </Grid>
</ContentPage>