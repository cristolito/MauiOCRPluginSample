<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:cv="clr-namespace:Camera.MAUI;assembly=Camera.MAUI"
             x:Class="MauiOcrPluginSample.MainPage"
             Title="Captura de Odómetros">

    <Grid RowDefinitions="*,Auto"
          RowSpacing="0"
          BackgroundColor="Black">

        <!-- Área principal de la cámara -->
        <Grid Grid.Row="0"
              VerticalOptions="FillAndExpand">

            <!-- Vista de cámara principal -->
            <cv:CameraView x:Name="realCaptureCamera"
                           HeightRequest="300"
                           WidthRequest="300"
                           CamerasLoaded="CameraView_CamerasLoaded"/>

                <Border x:Name="captureArea"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       HeightRequest="300"
                       WidthRequest="300"
                       Stroke="White"
                       StrokeThickness="2"
                       StrokeShape="Rectangle">
                </Border>
        </Grid>

        <!-- Panel de controles en la parte inferior -->
        <VerticalStackLayout Grid.Row="1"
                             BackgroundColor="#1A1A1A"
                             Padding="20,10"
                             Spacing="15">

            <!-- Fila de botones principales -->
            <HorizontalStackLayout Spacing="15"
                                  HorizontalOptions="Center">
                <Button Text="Capturar" 
                        Clicked="OnCapturePhotoClicked"
                        WidthRequest="160"
                        HeightRequest="50"/>

                <Button Text="Galería" 
                        Clicked="OnSelectFromGalleryClicked"
                        WidthRequest="160"
                        HeightRequest="50"/>
            </HorizontalStackLayout>

            <!-- Fila de botones secundarios -->
            <HorizontalStackLayout Spacing="15"
                                  HorizontalOptions="Center">
                <Button Text="Cambiar Cámara" 
                        Clicked="OnSwitchCameraClicked"
                        WidthRequest="160"
                        HeightRequest="50"/>

                <Button Text="Reiniciar" 
                        Clicked="OnResetCamera"
                        WidthRequest="160"
                        HeightRequest="50"/>
            </HorizontalStackLayout>
        </VerticalStackLayout>

        <!-- Indicador de carga (centrado en toda la pantalla) -->
        <ActivityIndicator x:Name="loadingIndicator"
                           Grid.RowSpan="2"
                           IsVisible="False"
                           IsRunning="True"
                           Color="White"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>
    </Grid>
</ContentPage>